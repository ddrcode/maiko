# Default task
default: check

# Quick check: format and lint
check:
    cargo fmt --all -- --check
    cargo clippy --workspace --all-targets --all-features -- -D warnings

# Full CI: format, lint, test, spell, build examples
ci: check test spell build

# Format code
fmt:
    cargo fmt --all

# Run all tests
test:
    cargo test --workspace --all-features

# Lint with warnings as errors
lint:
    cargo clippy --workspace --all-targets --all-features -- -D warnings

# Build workspace including examples
build:
    cargo build --workspace --all-features --examples

# Build docs (with all features to show everything)
doc:
    cargo doc --workspace --all-features --no-deps

# Open docs in browser
doc-open:
    cargo doc --workspace --all-features --no-deps --open

# Run spell checker
spell:
    cargo spellcheck

# Run all examples
examples:
    cargo run --example hello-world
    cargo run --example pingpong
    cargo run --example guesser
    cargo run --example monitoring --features monitoring
    cargo run --example arbitrage --features test-harness
    cargo run --example recorder --features recorder

# Clean build artifacts
clean:
    cargo clean

# Watch and run tests on changes (requires bacon)
watch:
    bacon test
